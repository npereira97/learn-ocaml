<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["asciimath2jax.js"],
  })
</script>

<h2>Demo Exercise: Russian Peasant Exponentiation</h2>

<p>
  This exercise demonstrates the tail recursion-checking functionality we have added to the Learn-OCaml platform. As this is only meant to be a demo for the tail recursion checker, the grader for this demo does only a minimal amount of testing in other respects.
</p>

<p>
  Russian peasant exponentiation, also known as <em>exponentiation by squaring</em>, is an algorithm for computing large (non-negative integer) powers of a number that is significantly faster than simply multiplying the number by itself the required number of times. To calculate `x^k`, we proceed as follows:
</p>

<ul>
  <li>If `k = 0`, the result is `1`.</li>
  <li>If `k` is even, the result is `x * x` to the power of `k / 2`.</li>
  <li>Otherwise, let `n` be `x` to the power of `k - 1`. The result is `x * n`.</li>
</ul>

<p>We are not concerned with negative integer inputs.</p>

<ol>
  <li>
    <p>Write a function <code>fast_exp: int -> int -> int</code> such that <code>fast_exp x k</code> calculates <code>x</code> to the power of <code>k</code> using the Russian peasant exponentiation algorithm as suggested above. This should be a straightforward implementation and not tail-recursive.</p>
  </li>

  <li>
    <p>We will now implement Russian peasant exponentiation tail-recursively.</p>

    <ol>
      <li>
        <p>Write a tail-recursive helper <code>fast_exp_aux: int -> int -> int -> int</code>, where the third argument is the accumulator for tail recursion.</p>
      </li>

      <li>
        <p>Now write a function <code>fast_exp_tl: int -> int -> int</code> using your tail-recursive helper. <code>fast_exp_tl</code> itself should <em>not</em> be recursive.</p>
      </li>
    </ol>
  </li>
</ol>
